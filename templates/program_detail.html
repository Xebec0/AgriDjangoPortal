{% extends 'base.html' %}

{% block title %}{{ program.title }} - Agrostudies Registration System{% endblock %}

{% block extra_css %}
<style>
.program-hero {
    position: relative;
    height: 400px;
    background-size: cover;
    background-position: center;
    border-radius: 15px;
    overflow: hidden;
    margin-bottom: 2rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.program-hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.7));
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 2rem;
}

.program-hero h1 {
    color: white;
    font-size: 3rem;
    font-weight: 700;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
    margin-bottom: 0.5rem;
}

.program-hero .breadcrumb {
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    display: inline-flex;
    margin-bottom: 1rem;
}

.program-hero .breadcrumb-item a {
    color: white;
    text-decoration: none;
    font-weight: 500;
}

.program-hero .breadcrumb-item.active {
    color: rgba(255,255,255,0.9);
}

.program-hero .breadcrumb-item + .breadcrumb-item::before {
    color: rgba(255,255,255,0.7);
}

.featured-badge {
    position: absolute;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    font-weight: 600;
    font-size: 1.1rem;
    box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.info-card {
    background: white;
    border-radius: 15px;
    padding: 2rem;
    box-shadow: 0 5px 20px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
    height: 100%;
}

.info-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.12);
}

.info-card h5 {
    color: #28a745;
    font-weight: 600;
    margin-bottom: 1.5rem;
    font-size: 1.3rem;
}

.info-item {
    display: flex;
    align-items: center;
    padding: 1rem 0;
    border-bottom: 1px solid #f0f0f0;
}

.info-item:last-child {
    border-bottom: none;
}

.info-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
    margin-right: 1rem;
    flex-shrink: 0;
}

.info-content strong {
    color: #666;
    font-size: 0.9rem;
    display: block;
    margin-bottom: 0.25rem;
}

.info-content span {
    color: #333;
    font-size: 1.05rem;
    font-weight: 500;
}

.feature-card {
    background: white;
    border-radius: 15px;
    padding: 2.5rem 1.5rem;
    text-align: center;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
}

.feature-card:hover {
    transform: translateY(-10px);
    border-color: #28a745;
    box-shadow: 0 15px 40px rgba(40, 167, 69, 0.15);
}

.feature-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 1.5rem;
    border-radius: 50%;
    background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: white;
    box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
}

.feature-card h5 {
    color: #333;
    font-weight: 600;
    margin-bottom: 1rem;
    font-size: 1.3rem;
}

.feature-card p {
    color: #666;
    margin: 0;
}

.action-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 15px;
    padding: 2.5rem;
    text-align: center;
    margin: 2rem 0;
}

.btn-apply {
    padding: 1rem 3rem;
    font-size: 1.2rem;
    font-weight: 600;
    border-radius: 30px;
    box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
    transition: all 0.3s ease;
}

.btn-apply:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(40, 167, 69, 0.4);
}

@media (max-width: 768px) {
    .program-hero {
        height: 300px;
    }
    
    .program-hero h1 {
        font-size: 2rem;
    }
    
    .featured-badge {
        top: 10px;
        right: 10px;
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
    }
}
</style>
{% endblock %}

{% block content %}
<!-- Hero Section with Program Image -->
<div class="program-hero" style="background-image: url('{{ program.get_image_url }}');">
    {% if program.is_featured %}
    <div class="featured-badge">
        <i class="fas fa-star me-2"></i>Featured Program
    </div>
    {% endif %}
    <div class="program-hero-overlay">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
                <li class="breadcrumb-item"><a href="{% url 'program_list' %}">Programs</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ program.title }}</li>
            </ol>
        </nav>
        <h1>{{ program.title }}</h1>
        <p class="text-white mb-0" style="font-size: 1.2rem; opacity: 0.9;">
            <i class="fas fa-map-marker-alt me-2"></i>{{ program.location }}
        </p>
    </div>
</div>

<div class="container">
    <div class="row mb-4">
        <div class="col-lg-8 mb-4">
            <div class="info-card">
                <h5><i class="fas fa-info-circle me-2"></i>Program Description</h5>
                <p style="font-size: 1.05rem; line-height: 1.8; color: #555;">{{ program.description|linebreaks }}</p>
            </div>
        </div>
        <div class="col-lg-4 mb-4">
            <div class="info-card">
                <h5><i class="fas fa-clipboard-list me-2"></i>Program Details</h5>
                
                <div class="info-item">
                    <div class="info-icon">
                        <i class="far fa-calendar-alt"></i>
                    </div>
                    <div class="info-content">
                        <strong>Start Date</strong>
                        <span>{{ program.start_date|date:"F j, Y" }}</span>
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div class="info-content">
                        <strong>Country</strong>
                        <span>{{ program.country }}</span>
                    </div>
                </div>

                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="info-content">
                        <strong>Location</strong>
                        <span>{{ program.location }}</span>
                    </div>
                </div>

                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="info-content">
                        <strong>Registration Deadline</strong>
                        <span>
                            {% if program.registration_deadline %}
                                {{ program.registration_deadline|date:"F j, Y, P" }}
                            {% else %}
                                Open until start date
                            {% endif %}
                        </span>
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="info-content">
                        <strong>Capacity</strong>
                        <span>{{ program.capacity }} participants</span>
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-venus-mars"></i>
                    </div>
                    <div class="info-content">
                        <strong>Gender Requirement</strong>
                        <span>{{ program.get_required_gender_display }}</span>
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-id-card"></i>
                    </div>
                    <div class="info-content">
                        <strong>Driver's License</strong>
                        <span>{% if program.requires_license %}Required{% else %}Not Required{% endif %}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Action Section -->
    <div class="action-section">
        {% if user.is_authenticated %}
            {% if user.is_staff %}
                <a href="{% url 'program_registrants' program.id %}" class="btn btn-success btn-apply">
                    <i class="fas fa-users me-2"></i>View Registrants
                </a>
            {% endif %}
            
            {% if user_registered %}
                {% if registration.status == 'pending' %}
                    <div class="alert alert-warning mb-3">
                        <i class="fas fa-hourglass-half me-2"></i>
                        <strong>Registration Pending</strong> - Your application is under review.
                    </div>
                    <a href="{% url 'cancel_registration' registration.id %}" class="btn btn-danger">
                        <i class="fas fa-times me-2"></i>Cancel Registration
                    </a>
                {% elif registration.status == 'approved' %}
                    <div class="alert alert-success mb-3">
                        <i class="fas fa-check-circle me-2"></i>
                        <strong>Congratulations!</strong> Your registration has been approved.
                    </div>
                    <a href="{% url 'cancel_registration' registration.id %}" class="btn btn-danger">
                        <i class="fas fa-times me-2"></i>Cancel Registration
                    </a>
                {% elif registration.status == 'rejected' %}
                    <div class="alert alert-danger mb-3">
                        <i class="fas fa-times-circle me-2"></i>
                        <strong>Registration Rejected</strong> - Please contact us for more information.
                    </div>
                {% endif %}
            {% else %}
                {% if not user.is_staff and not user.is_superuser and not has_applied_any %}
                    {% if program.is_registration_open %}
                        <h4 class="mb-3">Ready to Start Your Agricultural Journey?</h4>
                        <a href="{% url 'candidate_apply' program.id %}" class="btn btn-success btn-apply">
                            <i class="fas fa-user-plus me-2"></i>Apply Now
                        </a>
                    {% else %}
                        <div class="alert alert-warning mb-3">
                            <i class="fas fa-clock me-2"></i>
                            <strong>Registration Closed</strong> - The registration period for this program has ended.
                        </div>
                    {% endif %}
                {% endif %}
            {% endif %}
        {% else %}
            <h4 class="mb-3">Interested in This Program?</h4>
            <p class="mb-4">Please login or create an account to apply for this program.</p>
            <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal" class="btn btn-primary btn-apply me-2">
                <i class="fas fa-sign-in-alt me-2"></i>Login
            </a>
            <a href="#" data-bs-toggle="modal" data-bs-target="#registerModal" class="btn btn-success btn-apply">
                <i class="fas fa-user-plus me-2"></i>Register
            </a>
        {% endif %}
    </div>
    
    <!-- Feature Cards -->
    <div class="row mt-5">
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h5>Learn</h5>
                <p>Gain practical knowledge and skills in agricultural practices.</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-hands-helping"></i>
                </div>
                <h5>Experience</h5>
                <p>Get hands-on experience with modern farming techniques.</p>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h5>Connect</h5>
                <p>Network with agricultural professionals and fellow students.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
